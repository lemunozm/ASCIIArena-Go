@startuml

title Info server

actor Client
participant Server
participant InfoServer
participant Version
participant GameServer

Server -> Version : <<new>>
Server -> GameServer : <<new>>
Server -> InfoServer : <<new>>
Server -> InfoServer : run
activate InfoServer
loop
    Client ->> InfoServer : <<new connection>>
    InfoServer -> InfoServer : infoRequest
    activate InfoServer
    Client ->> InfoServer : versionMessage
    InfoServer -> Version : check
    activate Version
    InfoServer <- Version : compatibility
    deactivate Version
    Client <<-- InfoServer : checkVersionMessage
    InfoServer -> GameServer : getGameInfo
    activate GameServer
    InfoServer <-- GameServer
    deactivate GameServer
    Client <<-- InfoServer : serverInfoMessage
    deactivate InfoServer
end
Server <-- InfoServer
deactivate InfoServer

@enduml

